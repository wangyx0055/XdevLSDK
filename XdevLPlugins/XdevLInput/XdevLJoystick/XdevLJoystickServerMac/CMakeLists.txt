cmake_minimum_required(VERSION 2.8)

project(XdevLoystickServerMac)


#
# Set the names for the stuff we are going to create
#

set(XdevLJoystickServerMacLibrary XdevLJoystickServerMac)

#
# Set the Plugin version
#

set(XDEVLJOYSTICK_SERVER_MAJOR_VERSION 0)
set(XDEVLJOYSTICK_SERVER_MINOR_VERSION 1)
set(XDEVLJOYSTICK_SERVER_PATCH_VERSION 0)
set(XDEVLJOYSTICK_SERVER_VERSION "${XDEVLJOYSTICK_SERVER_MAJOR_VERSION}.${XDEVLJOYSTICK_SERVER_MINOR_VERSION}.${XDEVLJOYSTICK_SERVER_PATCH_VERSION}")

add_definitions(
	-DXDEVLJOYSTICK_SERVER_MAJOR_VERSION=${XDEVLJOYSTICK_SERVER_MAJOR_VERSION}
	-DXDEVLJOYSTICK_SERVER_MINOR_VERSION=${XDEVLJOYSTICK_SERVER_MINOR_VERSION} 
	-DXDEVLJOYSTICK_SERVER_PATCH_VERSION=${XDEVLJOYSTICK_SERVER_PATCH_VERSION}
)

#
# Set the Module version
#

set(XDEVLJOYSTICK_SERVER_MODULE_MAJOR_VERSION 0)
set(XDEVLJOYSTICK_SERVER_MODULE_MINOR_VERSION 1)
set(XDEVLJOYSTICK_SERVER_MODULE_PATCH_VERSION 0)
set(XDEVLJOYSTICK_SERVER_MODULE_VERSION "${XDEVLJOYSTICK_SERVER_MODULE_MAJOR_VERSION}.${XDEVLJOYSTICK_SERVER_MODULE_MINOR_VERSION}.${XDEVLJOYSTICK_SERVER_MODULE_PATCH_VERSION}")

add_definitions(
	-DXDEVLJOYSTICK_SERVER_MODULE_MAJOR_VERSION=${XDEVLJOYSTICK_SERVER_MODULE_MAJOR_VERSION}
	-DXDEVLJOYSTICK_SERVER_MODULE_MINOR_VERSION=${XDEVLJOYSTICK_SERVER_MODULE_MINOR_VERSION} 
	-DXDEVLJOYSTICK_SERVER_MODULE_PATCH_VERSION=${XDEVLJOYSTICK_SERVER_MODULE_PATCH_VERSION}
)

#
# Set variable names for the library
#
set(HEADERS_DIR ${XdevLoystickServerMac_SOURCE_DIR})
set(SRC_DIR ${XdevLoystickServerMac_SOURCE_DIR})

#
# Set the output directories
#

set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${XDEVL_PLUGINS}/lib)
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_DEBUG ${XDEVL_PLUGINS}/lib)
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_RELEASE ${XDEVL_PLUGINS}/lib)

set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${XDEVL_PLUGINS}/lib)
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${XDEVL_PLUGINS}/lib)
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${XDEVL_PLUGINS}/lib)

set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${XDEVL_PLUGINS}/lib)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_DEBUG ${XDEVL_PLUGINS}/lib)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_RELEASE ${XDEVL_PLUGINS}/lib)

#
# Set header files for the library.
#
set(HEADER_FILES
	${XdevLJoystick_SOURCE_DIR}/XdevLJoystick.h
	${HEADERS_DIR}/XdevLJoystickServerMac.h
)

#
# Set the source files for the library.
#
set(SOURCE_FILES
	${SRC_DIR}/XdevLJoystickServerMac.cpp
)


#
# Add external libraries folder
#
link_directories(${XdevL_BINARY_DIR}/lib)

#
# Create the library
#
add_library(${XdevLJoystickServerMacLibrary} SHARED
    ${HEADER_FILES}
    ${SOURCE_FILES}
)

#
# Add include directories

include_directories(
	.
	${XDEVL_HOME}/include
	${XDEVL_PLUGINS}
)

#
# Add external ibraries

target_link_libraries( ${XdevLJoystickServerMacLibrary} ${XdevLCoreLibrary} )


#
# Change the outputname of the library

set_property(TARGET ${XdevLJoystickServerMacLibrary} PROPERTY PREFIX "${XDEVL_SHARED_LIBRARY_FILE_PREFIX}")

if(CMAKE_BUILD_TYPE MATCHES Debug)
	set_property(TARGET ${XdevLJoystickServerMacLibrary} PROPERTY SUFFIX "-${XDEVLJOYSTICK_SERVER_VERSION}d${XDEVL_SHARED_LIBRARY_FILE_EXTENSION}")
else()
	set_property(TARGET ${XdevLJoystickServerMacLibrary} PROPERTY SUFFIX "-${XDEVLJOYSTICK_SERVER_VERSION}${XDEVL_SHARED_LIBRARY_FILE_EXTENSION}")
endif()

install(FILES ${HEADER_INTERFACE_FILE} DESTINATION "${XDEVL_PLUGINS_INCLUDE_INSTALL_PATH}/XdevLInput/${PROJECT_NAME}")
install(TARGETS ${XdevLJoystickLibrary} DESTINATION ${XDEVL_PLUGINS_INSTALL_PATH})